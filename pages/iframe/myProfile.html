<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>我的资料</title>
    <style>
        body{
            font-size:12px;
        }
        h1 {
            font-size: 14px;
        }
        h1, h2, h3, h4, h5, h6 {
            margin: 0;
            padding: 0;
            font-size: 12px;
            font-weight: normal;
        }
        div, form, img, ul, ol, li, dl, dt, dd, p {
            margin: 0;
            padding: 0;
            border: 0;
        }
        #done .title{
            height:30px;
            border-bottom:1px solid;
        }
        #box2 {
            width: 569px;
        }
        #box2 dl {
            width: 569px;
            height: 702px;
            padding-top: 10px;
            font-family: "新宋体";
        }
        #box2 dl dt {
            padding-left: 15px;
        }
        .formTable {
            width: 523px;
        }
        .formTable tr {
            height: 32px;
        }
        .formTable td.tdh {
            width: 180px;
            text-align: right;
        }

        td {
            padding-right: 20px;
        }
        .inp_01 {
            background: url(../../dest/img/input_back.jpg) repeat-x;
            width: 208px;
            height: 26px;
            line-height: 26px;
            padding-left: 4px;
            border-right: solid 1px #fff;
            border-bottom: solid 1px #fff;
            border-top: solid 1px #c5c5c5;
            border-left: solid 1px #c5c5c5;
        }
        .formTable td.middle {
            text-align: center;
            padding-top: 30px;
        }
        .prov,.city{
            width:100px;
        }
        b{
            color:red;
        }
    </style>
</head>
<body>
    <div id="done">
        <div class="title">
            <h1>我的资料</h1>
        </div>
        <form action="">
            <div id="box2">
                <dl>
                    <dt>
                        <table class="formTable">
                            <tbody>
                                <tr>
                                    <td class="tdh">
                                        <b>*</b>企业名称：
                                    </td>
                                    <td>
                                        <input name="TextBoxUnitName" type="text" value="" maxlength="50" id="TextBoxUnitName"
                                            class="inp_01">
                                        <span id="RequiredFieldUnitName" style="color:Red;display:none;"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        <b>*</b>地址：
                                    </td>
                                    <td id="select2">
                                        <select class="prov" name="province">
                                          
                                        </select>
                                        <select class="city" name="city">
                                           
                                        </select>
                                        <span id="CustomValidatorUnitAddress" style="color:Red;display:none;"></span>
                                        <br>
                                        <input name="TextBoxUnitSeat" type="text" value="" maxlength="128" id="TextBoxUnitSeat" class="inp_01">
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        企业网址：
                                    </td>
                                    <td>
                                        <input name="TextBoxWebSite" type="text" value="" maxlength="128"
                                            id="TextBoxWebSite" class="inp_01">
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        <b>*</b>E-mail：
                                    </td>
                                    <td>
                                        <input name="TextBoxContactEmail" type="text" value="" maxlength="128"
                                            id="TextBoxContactEmail" class="inp_01">
                                        <span id="RequiredFieldContactEmail" style="color:Red;display:none;"></span>
                                        <span id="RegularExpressionContactEmail" style="color:Red;display:none;"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        <b>*</b>法人代表：
                                    </td>
                                    <td>
                                        <input name="TextBoxChargePerson" type="text" value="" maxlength="50" id="TextBoxChargePerson"
                                            class="inp_01">
                                        <span id="RequiredFieldChargePerson" style="color:Red;display:none;"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        <b>*</b>电话：
                                    </td>
                                    <td>
                                        <input name="TextBoxCP_Tel" type="text" value="" maxlength="128" id="TextBoxCP_Tel"
                                            class="inp_01">
                                        <span id="RequiredFieldCP_Tel" style="color:Red;display:none;"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        <b>*</b>联系人：
                                    </td>
                                    <td>
                                        <input name="TextBoxContactName" type="text" value="" maxlength="50" id="TextBoxContactName"
                                            class="inp_01">
                                        <span id="RequiredFieldContactName" style="color:Red;display:none;"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        <b>*</b>职务：
                                    </td>
                                    <td>
                                        <input name="TextBoxContactPosition" type="text" value="" maxlength="128" id="TextBoxContactPosition"
                                            class="inp_01">
                                        <span id="RequiredFieldContactPosition" style="color:Red;display:none;"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        <b>*</b>联系电话：
                                    </td>
                                    <td>
                                        <input name="TextBoxContactTelAC" type="text" value="" maxlength="4" id="TextBoxContactTelAC"
                                            class="inp_01" style="width:40px;"> -
                                        <input name="TextBoxContactTel" type="text" value="" maxlength="120" id="TextBoxContactTel"
                                            class="inp_01" style="width:144px;">
                                        <span id="RequiredFieldContactTel" style="color:Red;display:none;"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        <b>*</b>手机：
                                    </td>
                                    <td>
                                        <input name="TextBoxContactMobil" type="text" value="" maxlength="128" id="TextBoxContactMobil"
                                            class="inp_01">
                                        <span id="RequiredFieldContactMobil" style="color:Red;display:none;"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        <b>*</b>传真：
                                    </td>
                                    <td>
                                        <input name="TextBoxContactFaxAC" type="text" value="" maxlength="4" id="TextBoxContactFaxAC"
                                            class="inp_01" style="width:40px;"> -
                                        <input name="TextBoxContactFax" type="text" value="" maxlength="120" id="TextBoxContactFax"
                                            class="inp_01" style="width:144px;">
                                        <span id="RequiredFieldContactFax" style="color:Red;display:none;"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        <b>*</b>邮编：
                                    </td>
                                    <td>
                                        <input name="TextBoxPostCode" type="text" value="" maxlength="128" id="TextBoxPostCode"
                                            class="inp_01">
                                        <span id="RequiredFieldPostCode" style="color:Red;display:none;"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        是否是联合会会员：
                                    </td>
                                    <td id="radio">
                                        <input id="RadioIsMember" type="radio" name="Member" value="1"><label for="RadioIsMember">是</label>
                                        <input id="RadioNotMember" type="radio" name="Member" value="0"><label
                                            for="RadioNotMember">不是</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        <span style="color: red;">*</span>企业性质：
                                    </td>
                                    <td>
                                    <select name="DDLUnitNature" id="DDLUnitNature">
                                        <option selected="selected" value="0">国有企业</option>
                                        <option value="1">民营企业</option>
                                        <option value="2">外商投资企业</option>
                                        <option value="3">其它</option>
                                    </select>
                                        <span id="RequiredFieldUnitNature" style="color:Red;display:none;"></span>
                                        <div id="span_Nature" style="display: none;">
                                            <input id="RadioIsCEnterprises" type="radio" name="CEnterprises" value="RadioIsCEnterprises"><label
                                                for="RadioIsCEnterprises">央企</label>
                                            <input id="RadioNotCEnterprises" type="radio" name="CEnterprises" value="RadioNotCEnterprises"
                                                checked="checked"><label for="RadioNotCEnterprises">非央企</label>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdh">
                                        <b>*</b>企业简介：
                                    </td>
                                    <td>
                                        <textarea name="TextBoxIntroduction" rows="5" cols="40" id="TextBoxIntroduction"></textarea>
                                        <span id="RequiredFieldIntroduction" style="color:Red;display:none;"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2" class="middle">
                                        <div id="ValidationSummary1" style="color:Red;display:none;">
            
                                        </div>
                                        <input type="button" name="ButtonSave" value="保 存"
                                            id="ButtonSave" class="button">
                                        &nbsp;&nbsp;
                                        <input type="button" value="打 印" class="button" onclick="window.print();">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </dt>
                </dl>
            </div>
        </form>
    </div>
    <script src="../../lib/jquery.min.js"></script>
    <script src="../../lib/jquery.cityselect.js"></script>
    <script src="../../pubilc.js"></script>
    <script>
        $("#select2").citySelect({
            url: "../../lib/city.min.js",
            prov: "请选择",
            city: "请选择",
            required: false
        });
        $("#DDLUnitNature").on("click", function () {
            var value = $(this).val();
            if (value == "SOE") {
                $("#span_Nature").show();
            } else {
                $("#span_Nature").hide();
            }
        })
        
        $("#ButtonSave").on("click",function(){
            var companyName = $("#TextBoxUnitName").val(), address = $("#TextBoxUnitSeat").val(), website = $("#TextBoxWebSite").val(),
                email = $("#TextBoxContactEmail").val(), representative = $("#TextBoxChargePerson").val(), telephone = $("#TextBoxCP_Tel").val(),
                 linkMan = $("#TextBoxContactName").val(), duty =  $("#TextBoxContactPosition").val(), linkPhone1 =  $("#TextBoxContactTelAC").val(),
                 linkPhone2 = $("#TextBoxContactTel").val(), phone = $("#TextBoxContactMobil").val(), fax1 = $("#TextBoxContactFaxAC").val(),
                  fax2 = $("#TextBoxContactFax").val(), postcode = $("#TextBoxPostCode").val(), isVip = $("#radio input[type='radio']:checked").val(),
                   companyType = $("#DDLUnitNature option:selected").val(), presentation = $("#TextBoxIntroduction").val();
            var data = {
                companyName: companyName,
                address: address,
                website: website,
                email: email,
                representative: representative,
                telephone: telephone,
                linkMan: linkMan,
                duty: duty,
                linkPhone1: linkPhone1,
                linkPhone2: linkPhone2,
                phone: phone,
                fax: fax1,
                fax2: fax2,
                postcode: postcode,
                isVip: isVip,
                companyType: companyType,
                presentation: presentation,

            }
            console.log(data)
             $.ajax({
                url:"http://declare.dagaimao.cn/web/index.php?r=users/save-data",
                type: "post",
                data:data,
                xhrFields: {
                    withCredentials: true//设置显式指定浏览器发送Cookie，跨域时默认不使用
                },
                crossDomain: true,
                dataType: "json",
                success: function (res) {
                    console.log(res);
                },
                error: function () {
                    console.log("error!!!!");
                }
            })
          

        })

        function saveSuccess(res){
            console.log(res)
        }
        function saveFail(res){
            console.log(res)
        }
        function onSuccess(res) {
            $("#TextBoxUnitName").val(res.data.companyName);
            $("#TextBoxUnitSeat").val(res.data.address);
            $("#TextBoxWebSite").val(res.data.website);
            $("#TextBoxContactEmail").val(res.data.email);
            $("#TextBoxChargePerson").val(res.data.representative);
            $("#TextBoxCP_Tel").val(res.data.telephone);
            $("#TextBoxContactName").val(res.data.linkMan);
            $("#TextBoxContactPosition").val(res.data.duty);
            $("#TextBoxContactTelAC").val(res.data.linkPhone1);
            $("#TextBoxContactTel").val(res.data.linkPhone2);
            $("#TextBoxContactMobil").val(res.data.phone);
            $("#TextBoxContactFaxAC").val(res.data.fax1);
            $("#TextBoxContactFax").val(res.data.fax2);
            $("#TextBoxPostCode").val(res.data.postcode);
            $("input[value='"+res.data.isVip+"']").prop("checked",true);
            if(res.data.companyType == "0"){
                $("#DDLUnitNature option:selected").text("国有企业");
            }else if(res.data.companyType == "1"){
                 $("#DDLUnitNature option:selected").text("民营企业");
            }else if(res.data.companyType == "2"){
                 $("#DDLUnitNature option:selected").text("外商投资企业");
            } else if (res.data.companyType == "3") {
                 $("#DDLUnitNature option:selected").text("其他");
            }
           
            $("#TextBoxIntroduction").val(res.data.presentation);
        }
        function onFail(res) {
            console.log("失败！")
        }
        $(function(){
            operaterData("?r=users/my-data","GET",'', onSuccess, onFail)
        })

    </script>
</body>
</html>